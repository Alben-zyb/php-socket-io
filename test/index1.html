<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<body>
  <p>hello world</p>
</body>
<script src='./socket.io.js'></script>
<!-- <script src='https://cdn.bootcss.com/socket.io/2.0.3/socket.io.js'></script> -->
<!--<script src='socket.io.js'></script>-->
<script>
  // 初始化io对象
  // var socket = io('http://127.0.0.1:2120');
  var socket = io('http://agv.dasu123.my');
  // uid 可以为网站用户的uid，作为例子这里用session_id代替
  var uid = "abc";
  // 当socket连接后发送登录请求
  socket.on('connect', function () {
    socket.emit('login', [uid, 'checkLink']);
    // socket.emit('bind', 'checkLink');
    // socket.emit('bind', ['checkLink', 'listen']);
    // socket.emit('bind', 'listen');
    // socket.emit('bind', 'listen_01628349b8058d3c54');
  });

  setTimeout(() => {
    socket.emit('bind', 'listen_01628349b8058d3c54');

  }, 3000);
  // 当服务端推送来消息时触发，这里简单的alert出来，用户可做成自己的展示效果
  socket.on('login', function (msg) {
    console.log('data: ', msg);
    alert('login:' + msg.message);
  });
  socket.on('checkLink', function (msg) {
    console.log('msg:', msg);
  });
  socket.on('listen_01628349b8058d3c54', function (msg) {
    console.log('listen_01628349b8058d3c54:' + msg.message);
  });
</script>

</html>